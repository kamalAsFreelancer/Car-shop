<!-- sell.html -->
<section class="sell-car">
  <div class="form-container">
    <h2>Sell Your Car</h2>
    <form action="http://localhost:3000/api/cars" method="POST" enctype="multipart/form-data">
      <input type="text" name="brand" placeholder="Enter your car brand" required />
      <input type="text" name="model" placeholder="Car Model" required />
      <input type="number" name="year" placeholder="Year" required />
      <input type="number" name="mileage" placeholder="Mileage (in Kilometer)" required />
      <input type="text" name="transmission" placeholder="Transmission" required />
      <input type="text" name="fuel_type" placeholder="Fuel Type" required />
      <input type="text" name="color" placeholder="Color" required />
      <input type="number" name="price" placeholder="Price in NPR" required />
      <input type="text" name="location" placeholder="Enter your location" required />
      <textarea name="description" placeholder="Description" rows="5" required></textarea>
      <input type="file" name="images" multiple accept="image/*" required />
      <button type="submit">Post Listing</button>
    </form>    
  </div>
</section>

<script>

document.querySelector('form').addEventListener('submit', async (e) => {
  e.preventDefault()
  
  const carData = {
    brand: e.target.brand.value,
    model: e.target.model.value,
    year: Number(e.target.year.value),
    mileage: Number(e.target.mileage.value),
    transmission: e.target.transmission.value,
    fuel_type: e.target.fuel_type.value,
    color: e.target.color.value,
    price: Number(e.target.price.value),
    description: e.target.description.value,
    location: e.target.location.value,
    images: [], // Handle image upload separately
  }
  
  await addCarListing(carData)
  alert('Car listing posted!')
  e.target.reset()
})

</script>